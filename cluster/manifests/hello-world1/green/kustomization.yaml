apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../prod/
nameSuffix: -green
secretGenerator:
- behavior: merge
  envs:
  - secrets.env
  name: hello-world1
patches:
- patch: |-
    - op: replace
      path: /spec/resources
      value:
        limits:
          cpu: 300m
          memory: 700Mi
        requests:
          cpu: 300m
          memory: 700Mi
  target:
    kind: Deployment
    name: hello-world1
images:
- name: hello-world1
  newName: alex202/hello-world1
  newTag: 24e4c31e6ae6aaea252d9ac2503a340de7b195ca
